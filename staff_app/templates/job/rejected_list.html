{% extends "staff_maintemp/nav.html" %}

{% block content %}

<h2>Rejected Applicants</h2>

<div style="margin-bottom:15px;">
  <a href="{% url 'staff_url:accepted_applicants' %}">View pipeline / accepted applicants</a> |
  <a href="{% url 'staff_url:post_list' %}">Back to job posts</a>
</div>

<p>These applicants have been rejected. Use Undo to move them back to the pending applicant list.</p>

<form method="get">
  <input type="text" name="q" placeholder="Search name or job number" value="{{ q }}">
  <button type="submit">Search</button>
</form>

<table border="1" cellpadding="5" cellspacing="0">
  <thead>
    <tr>
      <th>Applicant</th>
      <th>Job Number</th>
      <th>Job Title</th>
      <th>Applied At</th>
      <th>Reviewed At</th>
      <th>Status</th>
    </tr>
  </thead>
  <tbody>
    {% for app in applications %}
      <tr>
        <td>{{ app.applicant.get_full_name }} ({{ app.applicant.username }})</td>
        <td>{{ app.job.job_number }}</td>
        <td>{{ app.job.title }}</td>
        <td>{{ app.applied_at }}</td>
        <td>{{ app.reviewed_at }}</td>
        <td>
          <form method="post" action="{% url 'staff_url:review_applicant' app.id 'undo_reject' %}" onsubmit="return confirm('Move this applicant back to pending?');">
            {% csrf_token %}
            <button type="submit">Undo</button>
          </form>
        </td>
      </tr>
    {% empty %}
      <tr><td colspan="6">No rejected applicants.</td></tr>
    {% endfor %}
  </tbody>
</table>

{% endblock %}

