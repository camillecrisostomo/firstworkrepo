<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>User Registration</title>
</head>
<body>

{% include "nav.html" %}

<h2>User Registration</h2>

{% if messages %}
  {% for m in messages %}
    <p>{{ m }}</p>
  {% endfor %}
{% endif %}

<form method="post" novalidate>
  {% csrf_token %}

  <fieldset>
    <legend>Account Information</legend>
    {{ form.as_p }}
  </fieldset>

  <button type="submit">Register</button>
</form>

<p>
  Already registered? <a href="{% url 'user:login' %}">Login</a><br>
  <a href="{% url 'landing' %}">← Back to Landing Page</a>
</p>

{% if show_modal and user_id %}
  <div>
    <h3>Email Verification</h3>
    <form method="post" action="{% url 'user:verify' user_id %}">
      {% csrf_token %}
      <label>Verification Code:</label><br>
      <input type="text" name="code" maxlength="10" required><br><br>
      <button type="submit">Verify</button>
    </form>
    <p>
      Didn’t receive the code?
      <a href="{% url 'user:resend' user_id %}">Resend code</a>
    </p>
  </div>
{% endif %}

{% if form.errors %}
  <div>
    <h4>Form Errors:</h4>
    <pre>{{ form.errors }}</pre>
  </div>
{% endif %}

</body>
</html>