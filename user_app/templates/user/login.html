<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Login</title>
</head>
<body>
  {% include "nav.html" %}
  <h3>Login</h3>

  {% if messages %}
    {% for m in messages %}
      <div>
        <strong>{{ m }}</strong>
      </div>
    {% endfor %}
  {% endif %}

  <form method="post" novalidate>
    {% csrf_token %}
    
    <label for="id_email">Email:</label><br>
    <input type="email" name="email" id="id_email" value="{{ form.email.value|default:'' }}" required><br>
    {% if form.email.errors %}
      <ul>
        {% for error in form.email.errors %}
          <li><strong>{{ error }}</strong></li>
        {% endfor %}
      </ul>
    {% endif %}

    <label for="id_password">Password:</label><br>
    <input type="password" name="password" id="id_password" required><br>
    {% if form.password.errors %}
      <ul>
        {% for error in form.password.errors %}
          <li><strong>{{ error }}</strong></li>
        {% endfor %}
      </ul>
    {% endif %}

    <button type="submit">Login</button>
  </form>

  <p>
    Forgot password?
    <button type="button" onclick="document.getElementById('forgot').style.display='block'">Click here</button>
  </p>

  <p>Not registered? <a href="{% url 'user:register' %}">Register</a></p>

  <!-- Forgot password modal (simple version) -->
  <div id="forgot" style="display:none;">
    <form method="post" action="{% url 'user:forgot_password' %}">
      {% csrf_token %}
      <h4>Forgot Password</h4>
      <label>Email:</label>
      <input type="email" name="email" required>
      <button type="submit">Send</button>
      <button type="button" onclick="document.getElementById('forgot').style.display='none'">Close</button>
    </form>
  </div>
</body>
</html>
